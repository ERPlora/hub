{% load i18n %}
{% load ui %}

{% if modules %}
{% ui_grid_start padding=False %}
    {% ui_row_start %}
    {% for module in modules %}
        {% include "system/modules/partials/module_card.html" with module=module mode="marketplace" %}
    {% endfor %}
    {% ui_row_end %}
{% ui_grid_end %}

<!-- Pagination -->
{% if page_obj.has_other_pages %}
<div class="d-flex align-center justify-center gap-sm mt-lg flex-wrap">
    {% if page_obj.has_previous %}
    {% ui_button label=_("First") fill="outline" size="small" icon="chevron-back-outline" hx_get=first_page_url hx_target="#marketplace-modules-grid" hx_swap="innerHTML" hx_indicator="#loading-spinner" %}
    {% ui_button label="" fill="outline" size="small" icon="chevron-back-outline" icon_slot="icon-only" hx_get=prev_page_url hx_target="#marketplace-modules-grid" hx_swap="innerHTML" hx_indicator="#loading-spinner" %}
    {% endif %}

    <span class="text-medium px-md">
        {% trans "Page" %} {{ page_obj.number }} {% trans "of" %} {{ page_obj.paginator.num_pages }}
    </span>

    {% if page_obj.has_next %}
    {% ui_button label="" fill="outline" size="small" icon="chevron-forward-outline" icon_slot="icon-only" hx_get=next_page_url hx_target="#marketplace-modules-grid" hx_swap="innerHTML" hx_indicator="#loading-spinner" %}
    {% ui_button label=_("Last") fill="outline" size="small" icon="chevron-forward-outline" icon_position="end" hx_get=last_page_url hx_target="#marketplace-modules-grid" hx_swap="innerHTML" hx_indicator="#loading-spinner" %}
    {% endif %}
</div>
{% endif %}

{% else %}
{% ui_empty_state title=_("No modules found") description=_("Try adjusting your search or filters") icon="search-outline" %}
{% endif %}
