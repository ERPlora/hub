{% load i18n djicons %}

{% include "setup/partials/stepper.html" %}

{% if errors %}
<div class="callout callout-warning mb-4">
    {% for error in errors %}
    <p>{% icon "alert-circle-outline" %} {{ error }}</p>
    {% endfor %}
</div>
{% endif %}

<div class="stepper-content">
    <h2 class="text-xl font-semibold mb-1">{% trans "Tax Configuration" %}</h2>
    <p class="text-sm opacity-60 mb-6">{% trans "Set up your default tax settings" %}</p>

    <form hx-post="{% url 'setup:step' step=4 %}"
          hx-target="#wizard-step-content"
          hx-swap="innerHTML">
        {% csrf_token %}

        <div class="flex flex-col gap-4">
            <div class="form-group">
                <label class="form-group-label" for="tax_rate">{% trans "Default Tax Rate (%)" %}</label>
                <input class="input"
                    type="number"
                    name="tax_rate"
                    id="tax_rate"
                    value="{{ store_config.tax_rate|default:'21' }}"
                    placeholder="21"
                    min="0"
                    max="100"
                    step="0.01">
            </div>
            <div class="form-group">
                <div class="flex items-center justify-between gap-4">
                    <div>
                        <p class="text-sm font-medium mb-0.5">{% trans "Tax included in prices" %}</p>
                        <p class="text-xs opacity-60">{% trans "Prices shown already include tax" %}</p>
                    </div>
                    <label class="toggle">
                        <input type="checkbox" name="tax_included" {% if store_config.tax_included %}checked{% endif %}>
                        <span class="toggle-track">
                            <span class="toggle-thumb"></span>
                        </span>
                    </label>
                </div>
            </div>
        </div>

        <div class="stepper-actions">
            <div class="stepper-actions-start">
                <button type="button"
                        class="btn btn-outline"
                        hx-get="{% url 'setup:step' step=3 %}"
                        hx-target="#wizard-step-content"
                        hx-swap="innerHTML">
                    {% icon "arrow-back-outline" %}
                    {% trans "Back" %}
                </button>
            </div>
            <div class="stepper-actions-end">
                <button type="submit" class="btn color-primary">
                    {% icon "checkmark-circle-outline" %}
                    {% trans "Complete Setup" %}
                </button>
            </div>
        </div>
    </form>
</div>
