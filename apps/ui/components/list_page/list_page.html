{% load i18n ui component_tags %}

{# Tab bar update via OOB swap (only on HTMX navigation) #}
{% if request.htmx %}
    {% if module_id %}
        {# New system: use tabbar component with module_id #}
        {% component "tabbar" module_id=module_id current_view=tabbar_view oob=True %}{% endcomponent %}
    {% elif tabbar_template %}
        {# Legacy: include template directly #}
        {% include tabbar_template with current_view=tabbar_view oob=True %}
    {% endif %}
{% endif %}

{# CSRF token for JavaScript #}
{% csrf_token %}

{# Page Header with back button #}
{% ui_page_header title=title action_icon=action_icon action_label=action_label action_hx_get=action_url action_hx_target=action_hx_target action_hx_push_url="true" %}

<div class="ion-padding">
    {# Optional Stats Section #}
    {% slot "stats" %}{% endslot %}

    {# Filters Card #}
    {% slot "filters" %}{% endslot %}

    {# Main Content (Table/List) #}
    {% slot "content" %}{% endslot %}
</div>
