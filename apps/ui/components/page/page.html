{% load i18n ui component_tags %}
{#
    Page Component - Base structure for all module pages

    Generates a fragment with: content-header + page-content
    This fragment is swapped into #main-content-area (ion-content in app_base.html).

    The tabbar is sent separately via OOB swap to #global-tabbar.

    NOTE: Does NOT generate ion-page because it would be nested inside ion-content
    which is not allowed by Ionic. The outer ion-page is in app_base.html.

    Params:
        title: Page title
        subtitle: Optional subtitle
        module_id: Module ID for tabbar
        tabbar_view: Current view for active tab
        show_back: Show back button (default True)
        action_icon: Icon for header action
        action_label: Label for header action
        action_url: URL for header action (HTMX)
        padding: Add ion-padding to content
#}

{# Page Header (secondary - inside ion-content) #}
{% ui_page_header title=title subtitle=subtitle back_hx_get=back_hx_get back_hx_target=back_hx_target back_hx_push_url=back_hx_push_url action_icon=action_icon action_label=action_label action_hx_get=action_hx_get action_hx_target=action_hx_target action_hx_push_url=action_hx_push_url action_x_click=action_x_click show_back=show_back %}

{# CSRF token for JavaScript #}
{% csrf_token %}

{# Main content #}
<div class="page-content{% if padding %} ion-padding{% endif %}">
    {% slot "content" %}{% endslot %}
</div>

{# Tab bar OOB swap has been moved to ui/includes/tabbar_oob.html #}
{# Include it AFTER {% endcomponent %} in your partial template #}
