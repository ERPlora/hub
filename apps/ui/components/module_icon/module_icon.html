{% load static djicons %}

<div class="module-icon module-icon--{{ size }}{% if add_style %} module-icon--add{% endif %}{% if clickable %} module-icon--clickable{% endif %}"
     {% if clickable and url %}
     hx-get="{{ url }}"
     hx-target="{{ hx_target }}"
     hx-push-url="true"
     {% endif %}
     data-module-id="{{ module_id }}"
     style="--icon-container-size: {{ size_config.container }}px; --icon-size: {{ size_config.icon }}px; --icon-radius: {{ size_config.radius }}px;">

    <div class="module-icon__container module-icon__container--{{ color }}">
        {% if svg_path %}
            {# SVG/PNG icon using CSS mask for theme color support #}
            <div class="module-icon__svg">
                <div class="module-icon__img" style="--icon-src: url('{{ svg_path }}')"></div>
            </div>
        {% else %}
            {# Ionicon fallback - using djicons #}
            {% icon icon css_class="module-icon__ionicon" %}
        {% endif %}
    </div>

    {% if show_label and label %}
        <span class="module-icon__label">{{ label }}</span>
    {% endif %}
</div>
