{% load i18n djicons %}
<div data-back-url="{% if role %}{% url 'main:roles:detail' role_id=role.id %}{% else %}{% url 'main:roles:list' %}{% endif %}" hidden></div>

<form method="post"
      hx-post
      hx-target="#main-content-area"
      hx-push-url="true">
    {% csrf_token %}

    <!-- Role Info Card -->
    <div class="card glass mb-6">
        <div class="card-body">
            <div class="flex flex-col gap-4">
                {% if not role %}
                <!-- Role Name (only for new roles) -->
                <div class="form-group">
                    <label class="form-group-label" for="role-name">{% trans "Role Name" %} *</label>
                    <input type="text"
                           id="role-name"
                           name="name"
                           class="input"
                           value=""
                           required
                           pattern="[a-z_]+"
                           placeholder="{% trans 'e.g., warehouse_staff' %}">
                    <span class="form-group-helper">{% trans "Lowercase letters and underscores only. Cannot be changed later." %}</span>
                </div>
                {% endif %}

                <!-- Display Name -->
                <div class="form-group">
                    <label class="form-group-label" for="display-name">{% trans "Display Name" %} *</label>
                    <input type="text"
                           id="display-name"
                           name="display_name"
                           class="input"
                           value="{{ role.display_name|default:'' }}"
                           required
                           placeholder="{% trans 'e.g., Warehouse Staff' %}">
                </div>

                <!-- Description -->
                <div class="form-group">
                    <label class="form-group-label" for="description">{% trans "Description" %}</label>
                    <textarea id="description"
                              name="description"
                              class="textarea"
                              rows="3"
                              placeholder="{% trans 'Optional description for this role' %}">{{ role.description|default:'' }}</textarea>
                </div>
            </div>
        </div>
    </div>

    <!-- Submit Button -->
    <button type="submit" class="btn btn-block color-primary">
        {% if role %}
            {% icon "checkmark-outline" %}
            {% trans "Save Changes" %}
        {% else %}
            {% icon "add-outline" %}
            {% trans "Create Role" %}
        {% endif %}
    </button>
</form>
