{% load i18n djicons %}

<div class="page">
    <!-- Header Toolbar -->
    <header class="header">
        <div class="glass mx-4" style="border-radius: 1rem; overflow: hidden; box-shadow: rgba(0, 0, 0, 0.1) 0px 4px 20px; margin-top: 0.8rem; position: relative; z-index: 1001;">
            <div class="flex items-center">
                <button class="btn btn-ghost btn-sm"
                        hx-get="{% url 'main:index' %}"
                        hx-target="#main-content-area"
                        hx-push-url="true">
                    {% icon "arrow-back-outline" %}
                </button>
            </div>
            <div class="flex-1 flex items-center justify-center">
                <h1 class="font-semibold">{% trans "Employees" %}</h1>
            </div>
            <div class="flex items-center gap-2">
                <button class="btn btn-sm color-primary"
                        hx-get="{% url 'main:employee_add' %}"
                        hx-target="#main-content-area"
                        hx-push-url="true">
                    {% icon "add-outline" %}
                    <span class="hidden sm:block">{% trans "Add" %}</span>
                </button>
            </div>
        </div>
    </header>

    <!-- Content -->
    <div style="flex: 1; overflow: auto;">
        <div class="p-4">
            <!-- Search Bar -->
            <form id="employees-search-form"
                  hx-get="{% url 'main:employees' %}"
                  hx-target="#employees-list"
                  hx-swap="innerHTML"
                  hx-trigger="submit, input from:#employees-search delay:300ms"
                  hx-indicator="#employees-loading"
                  class="mb-4">

                <label class="input glass">
                    {% icon "search-outline" %}
                    <input type="text"
                           id="employees-search"
                           name="q"
                           placeholder="{% trans 'Search employees...' %}"
                           value="{{ request.GET.q|default:'' }}"
                           autocomplete="off">
                    {% if request.GET.q %}
                    <button type="button" onclick="document.getElementById('employees-search').value=''; htmx.trigger('#employees-search-form', 'submit');">
                        {% icon "close-circle" %}
                    </button>
                    {% endif %}
                </label>
            </form>

            <!-- Loading Spinner -->
            <div id="employees-loading" class="htmx-indicator text-center py-8">
                <div class="loading loading-lg"></div>
            </div>

            <!-- Employees List Container -->
            <div id="employees-list">
                {% include "main/employees/partials/employees_list.html" %}
            </div>
        </div>
    </div>
</div>
