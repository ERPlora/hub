{% load static %}{% load i18n %}<!DOCTYPE html>
<html lang="{{ LANGUAGE_CODE }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}ERPlora Hub{% endblock %}</title>

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="{% static 'img/favicon.ico' %}">

    <!-- Plus Jakarta Sans Font (local) -->
    <link rel="stylesheet" href="{% static 'fonts/plus-jakarta-sans/plus-jakarta-sans.css' %}">

    <!-- Ionic CSS (offline) -->
    <link rel="stylesheet" href="{% static 'css/ionic.bundle.css' %}" />

    <!-- Theme Colors (carga desde carpeta del tema: default o blue) -->
    <link rel="stylesheet" href="{% static 'css/themes/' %}{{ hub_config.color_theme }}/ionic-theme.css" id="theme-stylesheet">

    <!-- No More Tables - Responsive Table Pattern -->
    <link rel="stylesheet" href="{% static 'css/no-more-tables.css' %}">

    <!-- Tailwind CSS (offline) -->
    <script src="{% static 'js/tailwind.cdn.js' %}"></script>
    <link rel="stylesheet" href="{% static 'css/tailwind-ionic.css' %}">

    <!-- Alpine.js (offline) -->
    <script defer src="{% static 'js/alpine.min.js' %}"></script>

    <!-- Toast Helper -->
    <script src="{% static 'js/toast-helper.js' %}"></script>

    <!-- Ionic Core (offline) -->
    <script type="module" src="{% static 'js/ionic/ionic.esm.js' %}"></script>

    <!-- Ionicons (offline) -->
    <script type="module" src="{% static 'ionicons/dist/ionicons/ionicons.esm.js' %}"></script>
    <script nomodule src="{% static 'ionicons/dist/ionicons/ionicons.js' %}"></script>

    <!-- Theme Switcher Script -->
    <script>
        // Theme already loaded from template via context processor (line 12)
        // Dark mode is handled by Alpine.js in app_base.html for authenticated pages

        function setTheme(themeName) {
            const themeLink = document.getElementById('theme-stylesheet');
            const themeUrl = `/static/css/themes/${themeName}/ionic-theme.css`;

            if (themeLink) {
                themeLink.href = themeUrl;
            }
        }

        function getCurrentTheme() {
            return '{{ hub_config.color_theme }}';
        }

        function getThemeLogo() {
            return `/static/css/themes/{{ hub_config.color_theme }}/erplorer-logo.svg`;
        }
    </script>

    {% block extra_css %}{% endblock %}
</head>
<body>
    <ion-app>
        {% block content %}{% endblock %}
    </ion-app>

    {% block extra_js %}{% endblock %}
</body>
</html>
